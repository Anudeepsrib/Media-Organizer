<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Secure & Intelligent Media Organization Platform">
    <title>Enterprise Media Manager</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>

<body>
    <div class="app-layout">
        <!-- Top Navigation -->
        <nav class="navbar">
            <div class="brand">
                <svg class="brand-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" />
                </svg>
                <span>MediaManager</span>
            </div>
            <div class="nav-links">
                <span class="nav-link active" id="navDashboard">Dashboard</span>
                <span class="nav-link" id="navSettings">Settings</span>
                <a href="/docs" target="_blank" class="nav-link" style="text-decoration: none;">Docs</a>
            </div>
        </nav>

        <!-- Dashboard Grid -->
        <main class="dashboard-grid">
            <!-- Sidebar -->
            <aside class="sidebar">
                <div class="menu-title">Operations</div>
                <div class="operations-list">
                    <div class="operation-item" data-op="media_organize">
                        <svg class="op-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z">
                            </path>
                        </svg>
                        Organize Media
                    </div>
                    <div class="operation-item" data-op="subfolders">
                        <svg class="op-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                            <line x1="16" y1="2" x2="16" y2="6"></line>
                            <line x1="8" y1="2" x2="8" y2="6"></line>
                            <line x1="3" y1="10" x2="21" y2="10"></line>
                        </svg>
                        Expand to Days
                    </div>
                    <div class="operation-item" data-op="android_clean">
                        <svg class="op-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="3 6 5 6 21 6"></polyline>
                            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2">
                            </path>
                        </svg>
                        Clean Android
                    </div>
                    <div class="operation-item" data-op="organize_types">
                        <svg class="op-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                            <polyline points="14 2 14 8 20 8"></polyline>
                            <line x1="16" y1="13" x2="8" y2="13"></line>
                            <line x1="16" y1="17" x2="8" y2="17"></line>
                            <polyline points="10 9 9 9 8 9"></polyline>
                        </svg>
                        Organize Types
                    </div>
                    <div class="operation-item" data-op="consolidate_pdfs">
                        <svg class="op-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                            <polyline points="14 2 14 8 20 8"></polyline>
                            <path d="M12 18v-6"></path>
                            <path d="M9 15l3 3 3-3"></path>
                        </svg>
                        Consolidate PDFs
                    </div>
                    <div class="operation-item" data-op="analyze">
                        <svg class="op-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"></circle>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                        </svg>
                        Analyze Extensions
                    </div>
                </div>

                <div class="menu-title" style="margin-top: 2rem;">AI Tools</div>
                <div class="operations-list">
                    <div class="operation-item" id="aiIndexCard">
                        <svg class="op-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <database>
                                <ellipse cx="12" cy="5" rx="9" ry="3"></ellipse>
                                <path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path>
                                <path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path>
                            </database>
                        </svg>
                        Index Library
                    </div>
                    <div class="operation-item" id="aiSuggestCard">
                        <svg class="op-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path
                                d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z">
                            </path>
                        </svg>
                        Smart Suggestions
                    </div>
                </div>
            </aside>

            <!-- Main Content -->
            <div class="main-stage">
                <!-- Welcome / Selection Hint -->
                <div id="selectionSection" style="display: block;">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">Dashboard Overview</h2>
                        </div>
                        <p style="color: var(--text-muted); margin-bottom: 1.5rem;">Select an operation from the sidebar
                            to begin.</p>

                        <!-- AI Search Widget -->
                        <div class="ai-search-widget">
                            <div class="label">Semantic Search</div>
                            <div style="display: flex; gap: 0.5rem;">
                                <input type="text" id="aiSearchInput" class="input"
                                    placeholder="Search files by content (e.g. 'sunset beach', 'receipts')...">
                                <button id="aiSearchBtn" class="btn btn-primary">Search</button>
                            </div>
                        </div>
                    </div>

                    <!-- AI Results Section -->
                    <div id="aiSearchResults" class="card" style="display: none;">
                        <div class="card-header">
                            <h2 class="card-title" id="aiResultsTitle">Search Results</h2>
                            <button class="btn btn-secondary" id="aiResultsClose"
                                style="padding: 0.25rem 0.5rem; font-size: 0.75rem;">Close</button>
                        </div>
                        <div id="aiResultsGrid" class="results-grid"></div>
                    </div>
                </div>

                <!-- Config Panel -->
                <div id="configSection" class="card" style="display: none;">
                    <div class="card-header">
                        <h2 class="card-title" id="configTitle">Configure Operation</h2>
                    </div>
                    <form id="configForm">
                        <div class="form-group">
                            <label class="label" for="sourceDir">Source Directory</label>
                            <input type="text" id="sourceDir" class="input" placeholder="C:\Path\To\Source" required>
                        </div>

                        <div class="form-group" id="destDirGroup">
                            <label class="label" for="destDir">Destination Directory</label>
                            <input type="text" id="destDir" class="input" placeholder="C:\Path\To\Destination">
                        </div>

                        <div class="form-group" id="thresholdGroup" style="display: none;">
                            <label class="label" for="threshold">Size Threshold (MB)</label>
                            <input type="number" id="threshold" class="input" value="50">
                        </div>

                        <div style="display: flex; gap: 2rem; margin: 1.5rem 0;">
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" id="dryRun" checked>
                                <span style="font-size: 0.875rem;">Dry Run (Preview)</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" id="safeMode" checked>
                                <span style="font-size: 0.875rem;">Safe Mode (Verify)</span>
                            </label>
                        </div>

                        <div
                            style="display: flex; justify-content: flex-end; gap: 1rem; border-top: 1px solid var(--border-subtle); padding-top: 1.5rem;">
                            <button type="button" id="cancelBtn" class="btn btn-secondary">Cancel</button>
                            <button type="submit" id="startBtn" class="btn btn-primary">Start Operation</button>
                        </div>
                    </form>
                </div>

                <!-- AI Index Config -->
                <div id="aiIndexConfig" class="card" style="display: none;">
                    <div class="card-header">
                        <h2 class="card-title">Index Library</h2>
                    </div>
                    <div class="form-group">
                        <label class="label">Directory to Index</label>
                        <input type="text" id="aiSourceDir" class="input" placeholder="C:\Photos">
                    </div>
                    <div style="margin-bottom: 1.5rem;">
                        <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                            <input type="checkbox" id="aiForceReindex">
                            <span style="font-size: 0.875rem;">Force Re-index All</span>
                        </label>
                    </div>
                    <div style="display: flex; justify-content: flex-end; gap: 1rem;">
                        <button id="aiIndexCancel" class="btn btn-secondary">Cancel</button>
                        <button id="aiIndexStart" class="btn btn-primary">Start Indexing</button>
                    </div>
                </div>

                <!-- AI Suggest Config -->
                <div id="aiSuggestConfig" class="card" style="display: none;">
                    <div class="card-header">
                        <h2 class="card-title">Smart Suggestions</h2>
                    </div>
                    <div class="form-group">
                        <label class="label">Directory to Analyze</label>
                        <input type="text" id="aiSuggestDir" class="input" placeholder="C:\Downloads">
                    </div>
                    <div style="display: flex; justify-content: flex-end; gap: 1rem;">
                        <button id="aiSuggestCancel" class="btn btn-secondary">Cancel</button>
                        <button id="aiSuggestStart" class="btn btn-primary">Get Suggestions</button>
                    </div>
                </div>

                <!-- Progress Section -->
                <div id="progressSection" class="card" style="display: none;">
                    <div class="card-header">
                        <h2 class="card-title">Operation in Progress</h2>
                        <div class="text-right">
                            <div id="progressPercent"
                                style="font-size: 1.5rem; font-weight: 700; color: var(--brand-primary);">0%</div>
                            <div id="progressCount" style="color: var(--text-muted); font-size: 0.75rem;">0 / 0 files
                            </div>
                        </div>
                    </div>

                    <div class="progress-rail">
                        <div id="progressFill" class="progress-track"></div>
                    </div>

                    <div
                        style="background: var(--bg-body); padding: 1rem; border-radius: var(--radius-md); font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; color: var(--text-muted); margin-top: 1rem;">
                        <div id="statusMessage" style="color: var(--text-main); margin-bottom: 0.25rem;">Initializing...
                        </div>
                        <div id="currentFileName"></div>
                    </div>

                    <div style="text-align: center; margin-top: 1.5rem;">
                        <button id="abortBtn" class="btn btn-danger">Abort Operation</button>
                    </div>
                </div>

                <!-- Results Section -->
                <div id="resultsSection" class="card" style="display: none;">
                    <div class="card-header">
                        <h2 class="card-title" style="color: var(--status-success);">Operation Completed</h2>
                    </div>

                    <div
                        style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-bottom: 1.5rem; text-align: center;">
                        <div style="background: var(--bg-body); padding: 1rem; border-radius: var(--radius-md);">
                            <div id="statMoved"
                                style="font-size: 1.5rem; font-weight: 700; color: var(--status-success);">0</div>
                            <div style="font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase;">
                                Processed</div>
                        </div>
                        <div style="background: var(--bg-body); padding: 1rem; border-radius: var(--radius-md);">
                            <div id="statErrors"
                                style="font-size: 1.5rem; font-weight: 700; color: var(--status-error);">0</div>
                            <div style="font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase;">Errors
                            </div>
                        </div>
                        <div style="background: var(--bg-body); padding: 1rem; border-radius: var(--radius-md);">
                            <div id="statDuration"
                                style="font-size: 1.5rem; font-weight: 700; color: var(--text-main);">0s</div>
                            <div style="font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase;">
                                Duration</div>
                        </div>
                    </div>

                    <div id="detailsContent"
                        style="max-height: 300px; overflow-y: auto; background: var(--bg-body); padding: 1rem; border-radius: var(--radius-md); font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; color: var(--text-muted);">
                        <!-- Logs go here -->
                    </div>

                    <div style="text-align: right; margin-top: 1.5rem;">
                        <button onclick="window.location.reload()" class="btn btn-secondary">Done</button>
                    </div>
                </div>

            </div>
        </main>

        <footer class="footer">
            Media Manager v2.0 &copy; 2026 &bull; Enterprise Edition
        </footer>
    </div>

    <!-- Abort Modal -->
    <div id="abortModal"
        style="display: none; position: fixed; inset: 0; background: rgba(15, 23, 42, 0.9); z-index: 1000; align-items: center; justify-content: center;">
        <div class="card" style="max-width: 400px; margin: 0;">
            <div class="card-header" style="justify-content: center; border-bottom: 0;">
                <h3 style="color: var(--status-error);">Stop Operation?</h3>
            </div>
            <p style="text-align: center; color: var(--text-muted); margin-bottom: 1.5rem;">Safe Mode is active. Source
                files are preserved.</p>
            <div style="display: flex; gap: 1rem;">
                <button id="cancelAbortBtn" class="btn btn-secondary" style="flex: 1;">Resume</button>
                <button id="confirmAbortBtn" class="btn btn-danger" style="flex: 1;">Stop</button>
            </div>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>

</html>